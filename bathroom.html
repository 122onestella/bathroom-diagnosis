<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>„Éê„Çπ„É´„Éº„É†„Éª„Çª„É´„ÉïË®∫Êñ≠</title>
  <style>
    :root{
      --fs-title: clamp(40px, 7.2vw, 92px);
      --fs-subtitle: clamp(18px, 3.2vw, 44px);
      --fs-start-desc: clamp(18px, 3.2vw, 40px);
      --fs-btn: clamp(22px, 4.2vw, 56px);

      --fs-q: clamp(22px, 4.4vw, 62px);
      --fs-opt: clamp(18px, 3.6vw, 48px);
      --fs-chip: clamp(14px, 2.8vw, 34px);

      --fs-result-title: clamp(22px, 4.2vw, 54px);
      --fs-result-product: clamp(26px, 5.0vw, 68px);
      --fs-result-desc: clamp(18px, 3.6vw, 46px);

      /* ===== Color System (Muted / Elegant) ===== */
      --bg1: #EAF4FB;      /* background: soft blue */
      --bg2: #F7EAF3;      /* background: soft pink */
      --paper: #EEF6FB;    /* panels: soft blue-gray */
      --paper2:#FFFFFF;    /* cards */

      --ink: #2F3A40;      /* primary text */
      --ink-soft:#60727C;  /* secondary text */

      --accent:#BEE7E8;    /* main accent */
      --accent2:#A9D7E6;   /* accent 2 */
      --accent-strong:#0C56A3; /* for result headings */

      --card:#FFFFFF;
      --line:#E6EDF5;
      --shadow: 0 18px 50px rgba(0,0,0,.14);
      --shadow2: 0 10px 26px rgba(0,0,0,.10);
      --radius: 24px;
    }

    html, body { height:100%; width:100%; }
    *{ box-sizing:border-box; }

    body{
      margin:0; padding:0;
      font-family: "Noto Sans JP", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(900px 600px at 25% 15%, rgba(255,255,255,.65), transparent 60%),
        radial-gradient(1000px 700px at 85% 25%, rgba(255,255,255,.55), transparent 62%),
        linear-gradient(135deg, var(--bg1) 0%, #f3fbff 35%, #fff8fd 60%, var(--bg2) 100%);
      color: var(--ink);
      overflow-x:hidden;
    }

    .app-container{
      width:100%;
      min-height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding: 18px;
    }

    .content-wrapper{
      width:100%;
      max-width:1080px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(230,237,245,.85);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 28px 18px 34px;
      margin: 14px 0;
      backdrop-filter: blur(6px);
    }

    .header{
      text-align:center;
      margin-bottom: 18px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 10px;
    }

    .title{
      font-size: var(--fs-title);
      font-weight: 900;
      line-height: 1.08;
      color: var(--ink);
      padding: 22px 34px;
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(238,246,251,.95));
      box-shadow: var(--shadow2);
      text-shadow: 0 2px 0 rgba(255,255,255,.85);
      display:inline-block;
      letter-spacing: .02em;
      text-align:center;
      width: min(92%, 900px);
      border: 1px solid rgba(230,237,245,.8);
    }
/* ===== CTAÔºàË®∫Êñ≠Âæå„Éñ„É≠„ÉÉ„ÇØÔºâÊñáÂ≠ó„ÇíÂ§ß„Åç„Åè ===== */
.cta h3{
  font-size: clamp(22px, 4.4vw, 52px);
}
.cta p, .cta ul, .cta li{
  font-size: clamp(16px, 3.6vw, 40px);
  line-height: 1.6;
}
.cta .mini{
  font-size: clamp(14px, 3.0vw, 34px);
}

/* „ÄåÈÄÅ‰ø°„É°„ÉÉ„Çª„Éº„Ç∏„Çí„Ç≥„Éî„Éº„Äç„ÅÆ„Éú„Çø„É≥ÊñáÂ≠ó„ÅåÂ∞è„Åï„ÅèË¶ã„Åà„ÇÑ„Åô„ÅÑ„ÅÆ„ÅßÂ∫ï‰∏ä„Åí */
#ctaBlock .btn-secondary{
  font-size: clamp(18px, 3.6vw, 44px);
}

    .subtitle{
      font-size: var(--fs-subtitle);
      color: var(--ink-soft);
      margin: 0;
      opacity: .95;
      line-height: 1.35;
      text-align:center;
      width: min(92%, 900px);
    }

    #resultScreen .header .subtitle{ display:none; }

    .start-screen{
      text-align:center;
      padding: 10px 10px 4px;
      background: linear-gradient(180deg, rgba(238,246,251,.95), rgba(238,246,251,.78));
      border: 1px solid rgba(230,237,245,.95);
      border-radius: 22px;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
    }

    #questionScreen{
      background: linear-gradient(180deg, rgba(238,246,251,.95), rgba(238,246,251,.78));
      border: 1px solid rgba(230,237,245,.95);
      border-radius: 22px;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
      padding: 10px 10px 4px;
    }

    .start-icon{
      font-size: clamp(56px, 8vw, 96px);
      margin: 14px 0 12px;
      animation: floaty 2.3s ease-in-out infinite;
    }

    @keyframes floaty{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-10px); }
    }

    .start-description{
      font-size: var(--fs-start-desc);
      color: var(--ink-soft);
      margin: 0 0 18px;
      line-height: 1.55;
      padding: 0 10px;
    }

    /* Main button (Start / Next) */
    .btn{
      background: linear-gradient(135deg, rgba(190,231,232,.98) 0%, rgba(169,215,230,.98) 100%);
      color: var(--ink);
      border: 1px solid rgba(169,215,230,.55);
      padding: 18px 28px;
      font-size: var(--fs-btn);
      font-weight: 900;
      border-radius: 18px;
      cursor:pointer;
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
      box-shadow: 0 10px 26px rgba(169,215,230,.22);
      width: 100%;
      max-width: 520px;
      white-space: pre-line;
      line-height: 1.15;
      letter-spacing: .02em;
      margin: 0 auto 14px;
    }
    .btn:hover{
      transform: translateY(-2px);
      filter: brightness(1.02);
      box-shadow: 0 14px 32px rgba(169,215,230,.28);
    }
    .btn:active{ transform: translateY(0); }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }

    .progress-bar{
      width:100%;
      height: 12px;
      background: rgba(230,237,245,.95);
      border-radius: 999px;
      overflow:hidden;
      margin: 6px 0 18px;
      border: 1px solid rgba(230,237,245,.95);
    }
    .progress-fill{
      height: 100%;
      background: linear-gradient(90deg, rgba(190,231,232,.98) 0%, rgba(169,215,230,.98) 100%);
      transition: width .35s ease;
      border-radius: 999px;
    }

    .question-container{ margin-bottom: 12px; }

    .question-number{
      display:inline-block;
      background: linear-gradient(135deg, rgba(190,231,232,.85) 0%, rgba(169,215,230,.85) 100%);
      color: var(--ink);
      padding: 10px 18px;
      border-radius: 999px;
      font-size: var(--fs-chip);
      font-weight: 900;
      margin-bottom: 12px;
      letter-spacing: .03em;
      border: 1px solid rgba(169,215,230,.55);
    }

    .question-text{
      font-size: var(--fs-q);
      font-weight: 900;
      color: var(--ink);
      margin: 0 0 18px;
      line-height: 1.25;
      letter-spacing: .01em;
    }

    .options-grid{
      display:flex;
      flex-direction:column;
      gap: 14px;
      margin-bottom: 10px;
    }

    .option-card{
      background: rgba(255,255,255,.94);
      border: 2px solid rgba(230,237,245,.98);
      border-radius: 18px;
      padding: 18px 14px;
      cursor:pointer;
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
      text-align:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      min-height: 110px;
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
    }
    .option-card:hover{
      transform: translateY(-3px);
      border-color: rgba(169,215,230,.75);
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
    }
    .option-card.selected{
      border-color: rgba(169,215,230,.95);
      background: linear-gradient(135deg, rgba(190,231,232,.22) 0%, rgba(169,215,230,.18) 100%);
      box-shadow: 0 10px 22px rgba(169,215,230,.16);
    }

    .option-icon{ font-size: clamp(34px, 6vw, 64px); margin-bottom: 8px; }
    .option-text{
      font-size: var(--fs-opt);
      font-weight: 800;
      color: var(--ink);
      line-height: 1.2;
      white-space: pre-line;
      text-align:center;
    }

    .navigation-buttons{
      display:flex;
      justify-content:space-between;
      gap: 12px;
      margin-top: 16px;
      align-items:stretch;
    }

    .btn-secondary{
      background: rgba(255,255,255,.92);
      color: var(--ink-soft);
      padding: 16px 16px;
      border: 2px solid rgba(230,237,245,.98);
      border-radius: 16px;
      font-size: var(--fs-btn);
      font-weight: 900;
      cursor:pointer;
      transition: filter .2s ease, transform .2s ease;
      flex:1;
      white-space: nowrap;
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
    }
    .btn-secondary:hover{ filter: brightness(.99); transform: translateY(-1px); }
    .btn-secondary:disabled{ opacity:.55; cursor:not-allowed; transform:none; }

    /* ===== Result ===== */
    .result-container{ text-align:center; }
    .result-icon{ font-size: clamp(56px, 8vw, 96px); margin-bottom: 14px; animation: pop .6s ease; }
    @keyframes pop{ 0%{transform:scale(0)} 70%{transform:scale(1.08)} 100%{transform:scale(1)} }

    .result-title{
      font-size: var(--fs-result-title);
      font-weight: 900;
      margin: 0 0 14px;
      color: var(--accent-strong);
      letter-spacing: .02em;
    }

    .result-loading{
      font-size: clamp(18px, 3.8vw, 44px);
      font-weight: 900;
      color: rgba(12, 86, 163, .95);
      margin: 34px 0;
      animation: pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse{ 0%,100%{opacity:1} 50%{opacity:.5} }

    .result-product{
      font-size: var(--fs-result-product);
      font-weight: 950;
      color: #0c56a3;
      -webkit-text-stroke: 2px rgba(255,255,255,.95);
      text-shadow:
        0 2px 0 rgba(255,255,255,.85),
        0 8px 20px rgba(0,0,0,.10);
      margin: 0 0 14px;
      opacity:0;
      animation: fadeUp .6s ease forwards;
    }
    @keyframes fadeUp{ from{opacity:0; transform: translateY(18px)} to{opacity:1; transform:none} }

    .result-images{
      display:flex;
      flex-direction:column;
      gap: 14px;
      align-items:center;
      opacity:0;
      animation: fadeUp .6s ease .15s forwards;
    }
    .image-wrapper{ position:relative; display:inline-block; width:100%; }
    .result-image{
      width:100%;
      max-width: 560px;
      height:auto;
      border-radius: 18px;
      margin: 8px auto;
      box-shadow: 0 14px 34px rgba(0,0,0,.14);
      display:block;
    }

    .result-description{
      font-size: var(--fs-result-desc);
      color: var(--ink);
      line-height: 1.55;
      margin: 16px 0 18px;
      text-align:left;
      background: linear-gradient(180deg, rgba(238,246,251,.92), rgba(255,255,255,.92));
      padding: 18px;
      border-radius: 16px;
      border: 1px solid rgba(230,237,245,.98);
      box-shadow: 0 10px 22px rgba(0,0,0,.05);
    }

    /* ===== CTA block ===== */
    .cta{
      text-align:left;
      margin: 14px 0 10px;
      background: rgba(255,255,255,.88);
      border: 2px dashed rgba(12, 86, 163, .22);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 10px 24px rgba(0,0,0,.06);
    }
    .cta h3{
      margin: 0 0 10px;
      font-size: clamp(20px, 4.0vw, 44px);
      font-weight: 950;
      color: var(--accent-strong);
      line-height: 1.2;
    }
    .cta p{
      margin: 0 0 12px;
      font-size: clamp(16px, 3.2vw, 38px);
      line-height: 1.55;
      color: var(--ink);
    }
    .cta ul{
      margin: 0 0 12px 1.2em;
      padding: 0;
      font-size: clamp(16px, 3.2vw, 38px);
      line-height: 1.55;
      color: var(--ink);
    }
    .cta .mini{
      font-size: clamp(14px, 2.8vw, 32px);
      color: rgba(96,114,124,.9);
      margin-top: 6px;
    }

    /* Keep LINE button green for recognizability */
    .btn-line{
      background: linear-gradient(135deg, rgba(8,191,84,.95) 0%, rgba(8,191,84,.78) 100%);
      color: #fff;
      border: none;
      padding: 16px 18px;
      border-radius: 16px;
      font-size: var(--fs-btn);
      font-weight: 900;
      cursor:pointer;
      width:100%;
      max-width: 520px;
      white-space: pre-line;
      box-shadow: 0 10px 26px rgba(8,191,84,.18);
      margin: 0 auto 12px;
      display:block;
    }
    .btn-line:hover{ filter: brightness(1.02); }

    /* Make pay button muted blue (not brown) */
    .btn-pay{
      background: linear-gradient(135deg, rgba(12, 86, 163, .92) 0%, rgba(12, 86, 163, .72) 100%);
      color: #fff;
      border:none;
      padding: 16px 18px;
      border-radius: 16px;
      font-size: var(--fs-btn);
      font-weight: 900;
      cursor:pointer;
      width:100%;
      max-width: 520px;
      white-space: pre-line;
      box-shadow: 0 10px 26px rgba(12, 86, 163, .18);
      margin: 0 auto 8px;
      display:block;
    }
    .btn-pay:hover{ filter: brightness(1.02); }

    /* Restart button: match the main system */
    .btn-restart{
      background: linear-gradient(135deg, rgba(190,231,232,.98) 0%, rgba(169,215,230,.98) 100%);
      color: var(--ink);
      padding: 16px 18px;
      border: 1px solid rgba(169,215,230,.55);
      border-radius: 16px;
      font-size: var(--fs-btn);
      font-weight: 900;
      cursor:pointer;
      transition: transform .2s ease, box-shadow .2s ease;
      box-shadow: 0 10px 26px rgba(169,215,230,.22);
      white-space: pre-line;
      width:100%;
      max-width: 520px;
      margin: 0 auto;
      display:block;
    }
    .btn-restart:hover{ transform: translateY(-2px); box-shadow: 0 14px 32px rgba(169,215,230,.28); }
  </style>
</head>

<body>
  <div class="app-container">
    <div class="content-wrapper">
      <header class="header">
        <h1 class="title" id="mainTitle">„Éê„Çπ„É´„Éº„É†<br>„Çª„É´„ÉïË®∫Êñ≠</h1>
        <p class="subtitle" id="subtitle">„ÅÇ„Å™„Åü„Å´„Å≥„Å£„Åü„Çä„ÅÆ<br>„Éê„Çπ„É´„Éº„É†„ÇíË¶ã„Å§„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
      </header>

      <main id="startScreen" class="start-screen">
        <div class="start-icon">üõÅ</div>
        <p class="start-description">
          Ë≥™Âïè„Å´Á≠î„Åà„Çã„Å†„Åë„Åß„ÄÅ<br />„ÅÇ„Å™„Åü„Å´„Å¥„Å£„Åü„Çä„ÅÆ„Éê„Çπ„É´„Éº„É†„Çí„ÅîÊèêÊ°à„Åó„Åæ„Åô„ÄÇ<br />
          ÊâÄË¶ÅÊôÇÈñìÔºöÁ¥Ñ2ÂàÜ
        </p>
        <button class="btn" id="startButton" type="button" onclick="startDiagnosis()">Ë®∫Êñ≠
„Çπ„Çø„Éº„Éà</button>
      </main>

      <section id="questionScreen" style="display:none;">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width:0%;"></div>
        </div>

        <div class="question-container">
          <span class="question-number" id="questionNumber">Ë≥™Âïè 1/8</span>
          <h2 class="question-text" id="questionText"></h2>
          <div class="options-grid" id="optionsContainer"></div>
        </div>

        <nav class="navigation-buttons">
          <button class="btn-secondary" id="backButton" type="button" onclick="goBack()" disabled>Êàª„Çã</button>
          <button class="btn" id="nextButton" type="button" onclick="goNext()" disabled>Ê¨°„Å∏</button>
        </nav>
      </section>

      <section id="resultScreen" style="display:none;">
        <div class="result-container">
          <div class="result-icon">üéâ</div>
          <h2 class="result-title">Ë®∫Êñ≠ÁµêÊûú</h2>

          <div id="resultLoading" class="result-loading">„ÅÇ„Å™„Åü„ÅÆË®∫Êñ≠ÁµêÊûú„ÅØ„Éª„Éª„ÉªÔºü</div>

          <div id="resultContent" style="display:none;">
            <div class="result-product" id="resultProduct"></div>

            <div class="result-images">
              <div class="image-wrapper">
                <img id="resultImageMain" class="result-image" alt="„Åä„Åô„Åô„ÇÅË£ΩÂìÅÔºà„É°„Ç§„É≥Ôºâ"
                     onerror="this.src=''; this.alt='ÁîªÂÉè„ÇíË™≠„ÅøËæº„ÇÅ„Åæ„Åõ„Çì„Åß„Åó„Åü'; this.style.display='none';" />
              </div>
              <div class="image-wrapper">
                <img id="resultImageSub" class="result-image" alt="„Åä„Åô„Åô„ÇÅË£ΩÂìÅÔºà„Çµ„ÉñÔºâ"
                     onerror="this.src=''; this.alt='ÁîªÂÉè„ÇíË™≠„ÅøËæº„ÇÅ„Åæ„Åõ„Çì„Åß„Åó„Åü'; this.style.display='none';" />
              </div>
            </div>

            <div class="result-description" id="resultDescription"></div>

            <!-- ‚òÖ „Åì„Åì„Åã„ÇâCTA -->
           
  <h3>Ë®∫Êñ≠ÁµêÊûú„ÅØ„ÅÑ„Åã„Åå„Åß„Åó„Åü„ÅãÔºüüòä</h3>

  <p>
    „Åì„ÅÆÁîªÈù¢„Çí„Çπ„ÇØ„Ç∑„Éß„Åó„Å¶„ÄÅÂÖ¨ÂºèLINE„Å´ÈÄÅ„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ<br>
    „ÅÇ„Å™„Åü„ÅÆË®∫Êñ≠ÁµêÊûú„Çí„ÇÇ„Å®„Å´„ÄÅ
    <strong>„Äå„ÅÇ„Å™„Åü„Å´Âêà„Å£„ÅüÊ∞¥Âªª„ÇäÈÅ∏„Å≥„ÅÆ„Éù„Ç§„É≥„Éà„Äç</strong>„Çí
    ÁÑ°Êñô„Åß„Åä‰ºù„Åà„Åó„Åæ„Åô‚ú®
  </p>

  <ul>
    <li>„Éê„Çπ„É´„Éº„É†„Å†„ÅëÔºè„Ç≠„ÉÉ„ÉÅ„É≥„Å†„ÅëÔºè‰∏°Êñπ„Åß„ÇÇOK„Åß„Åô</li>
    <li>„Çπ„ÇØ„Ç∑„Éß1Êûö„ÅßÂ§ß‰∏àÂ§´„Åß„Åô</li>
  </ul>

  <button class="btn-line" type="button" onclick="openLineWithMessage()">
    LINE„Å´Ë®∫Êñ≠ÁµêÊûú„ÇíÈÄÅ„Çã
  </button>

  <button class="btn-secondary" type="button" onclick="copyLineMessage()">
    ÈÄÅ‰ø°„É°„ÉÉ„Çª„Éº„Ç∏„Çí„Ç≥„Éî„Éº
  </button>

  <div class="mini">
    ‚ÄªLINE„ÅåÈñã„ÅÑ„Åü„Çâ„ÄÅ„Çπ„ÇØ„Ç∑„Éß„ÇíË≤º„Çä‰ªò„Åë„Å¶ÈÄÅ„Å£„Å¶„Åè„Å†„Åï„ÅÑüòä
  </div>

</div>
             
              
            <!-- ‚òÖ CTA„Åì„Åì„Åæ„Åß -->
„ÄÄ„ÄÄ<button class="btn-restart" type="button" onclick="goToSelect()">
„ÇÇ„ÅÜ‰∏ÄÂ∫¶<br>Ë®∫Êñ≠„Åô„Çã
</button>
          
          </div>
        </div>
      </section>

    </div>
  </div>
  <script>
  /* =========================
     LINE ÈÄÅ‰ø°Áî®ÔºàÂÖ±ÈÄöÔºâ
  ========================= */
  const LINE_URL = "https://page.line.me/064jdvrk";

  // ÂÖ¨ÂºèLINE„ÇíÈñã„Åè„Å†„ÅëÔºà‰øùÈô∫Áî®Ôºâ
  function openLine(){
    if(!LINE_URL){
      alert("LINE„ÅÆURL„ÅåÊú™Ë®≠ÂÆö„Åß„Åô");
      return;
    }
    window.open(LINE_URL, "_blank");
  }

  // Ë®∫Êñ≠ÁµêÊûúÈÄÅ‰ø°Áî®Ôºà„É°„ÉÉ„Çª„Éº„Ç∏‰ªò„ÅçÔºâ
  function openLineWithMessage(){
    const message =
`Ë®∫Êñ≠ÁµêÊûú„ÇíÈÄÅ„Çä„Åæ„Åôüòä

‚ë† „Éê„Çπ„É´„Éº„É† / „Ç≠„ÉÉ„ÉÅ„É≥Ôºà„Å©„Å°„Çâ„ÅÆË®∫Êñ≠„ÅãÔºâ
‚ë° Ë®∫Êñ≠ÁµêÊûú„ÅÆ„Çπ„ÇØ„Ç∑„Éß

„Çí„ÅäÈÄÅ„Çä„Åó„Åæ„ÅôÔºÅ`;

    const encoded = encodeURIComponent(message);
    const url = `https://line.me/R/share?text=${encoded}`;
    window.open(url, "_blank");
  }

  // „É°„ÉÉ„Çª„Éº„Ç∏„Ç≥„Éî„ÉºÁî®ÔºàLINEÈñã„Åë„Å™„ÅÑ‰∫∫Áî®Ôºâ
  async function copyLineMessage(){
    const message =
`Ë®∫Êñ≠ÁµêÊûú„ÇíÈÄÅ„Çä„Åæ„Åôüòä

‚ë† „Éê„Çπ„É´„Éº„É† / „Ç≠„ÉÉ„ÉÅ„É≥Ôºà„Å©„Å°„Çâ„ÅÆË®∫Êñ≠„ÅãÔºâ
‚ë° Ë®∫Êñ≠ÁµêÊûú„ÅÆ„Çπ„ÇØ„Ç∑„Éß

„Çí„ÅäÈÄÅ„Çä„Åó„Åæ„ÅôÔºÅ`;

    try{
      await navigator.clipboard.writeText(message);
      alert("ÈÄÅ‰ø°„É°„ÉÉ„Çª„Éº„Ç∏„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åüüìã\nLINE„Å´Ë≤º„Çä‰ªò„Åë„Å¶ÈÄÅ„Å£„Å¶„Åè„Å†„Åï„ÅÑüòä");
    }catch(e){
      alert("„Ç≥„Éî„Éº„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ‰∏ä„ÅÆÊñáÁ´†„ÇíÊâãÂãï„ÅßÈÄÅ„Å£„Å¶„Åè„Å†„Åï„ÅÑüôè");
    }
  }

  /* =========================
     Ë®∫Êñ≠„É≠„Ç∏„ÉÉ„ÇØÔºà„Åì„Åì„Åã„Çâ‰∏ãÔºâ
  ========================= */

  const questions = [
    {
      id: 1,
      text: "‰ªä„ÅÆ„ÅäÈ¢®ÂëÇ„ÅßÊ∞ó„Å´„Å™„Å£„Å¶„ÅÑ„ÇãÈÉ®ÂàÜ„Çí„Äê2„Å§„Åæ„Åß„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      maxSelections: 2,
      options: [
        { icon: "üßä", text: "ÂØí„ÅÑ„Éª\n„Éí„Éº„Éà„Ç∑„Éß„ÉÉ„ÇØ„Åå‰∏çÂÆâ", value: "cold_concern" },
        { icon: "‚ú®", text: "ÊéÉÈô§„Åó„Å¶„ÇÇ\nÊ±ö„Çå„ÇÑ„Ç´„Éì„ÅåËêΩ„Å°„Å™„ÅÑ", value: "cleaning_hard" },
        { icon: "‚ö†Ô∏è", text: "Ëª¢„Çì„Å†„Çä\n„Åô„Åπ„Çä„Åù„ÅÜ„Åß‰∏çÂÆâ", value: "safety_concern" },
        { icon: "üí∞", text: "Êµ¥ÊßΩ„ÅÆ„ÅäÊπØ„ÅåÂÜ∑„ÇÅ„ÇÑ„Åô„ÅÑ\nÂÖâÁÜ±Ë≤ª„ÅåÊ∞ó„Å´„Å™„Çã", value: "heat_cost" },
        { icon: "üé®", text: "Âè§„Åï„Éª\nË¶ã„ÅüÁõÆ„ÅåÊ∞ó„Å´„Å™„Çã", value: "appearance_old" }
      ]
    },
    {
      id: 2,
      text: "„ÅäÈ¢®ÂëÇ„Åß„Äå„Åì„Çå„Å†„Åë„ÅØË≠≤„Çå„Å™„ÅÑ„ÄçÂÑ™ÂÖàÂ∫¶„ÅåÈ´ò„ÅÑ„Éù„Ç§„É≥„Éà„Çí„Äê2„Å§„Åæ„Åß„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      maxSelections: 2,
      options: [
        { icon: "‚ô®Ô∏è", text: "Êñ≠ÁÜ±ÊÄß„Éª\nÊ∏©„Åã„Åï", value: "insulation" },
        { icon: "‚ú®", text: "Ëá™ÂãïÊ¥óÊµÑ„ÉªÈô§Ëèå„Å™„Å©\n„ÅäÊâãÂÖ•„Çå„Åå„É©„ÇØ", value: "easy_clean" },
        { icon: "üí°", text: "ÁØÄÊ∞¥„ÉªÁúÅ„Ç®„Éç„Å™„Å©\nÂÖâÁÜ±Ë≤ª„ÇíÊäë„Åà„Çã", value: "energy_save" },
        { icon: "üßò", text: "„Éï„Ç°„Ç§„É≥„Éê„Éñ„É´„Å™„Å©\n„É™„É©„ÉÉ„ÇØ„ÇπÊ©üËÉΩ", value: "relax_function" },
        { icon: "üé®", text: "„Çπ„ÉÉ„Ç≠„É™ËêΩ„Å°ÁùÄ„Åè\n„Éá„Ç∂„Ç§„É≥", value: "design_calm" }
      ]
    },
    {
      id: 3,
      text: "„ÅÇ„Å™„Åü„ÅÆ„ÅäÈ¢®ÂëÇ„ÅÆÂÖ•„ÇäÊñπ„Åß‰∏ÄÁï™Ëøë„ÅÑ„ÇÇ„ÅÆ„Çí„Äê1„Å§„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      options: [
        { icon: "‚ö°", text: "„Çµ„ÉÉ„Å®ÂÖ•„Å£„Å¶\n„Åô„ÅêÂá∫„Çã", value: "quick" },
        { icon: "üßò", text: "1Êó•„ÅÆÁñ≤„Çå„Çí\n„Åó„Å£„Åã„ÇäÁôí„Åó„Åü„ÅÑ", value: "relax_deep" },
        { icon: "üë∂", text: "Â≠ê„Å©„ÇÇ„Å®ÂÖ•„Çã„Åì„Å®„Åå\nÂ§ö„ÅÑ", value: "with_kids" },
        { icon: "üåô", text: "Ëá™ÂàÜ„Å†„Åë„ÅÆ\n„É™„É©„ÉÉ„ÇØ„Çπ„Çø„Ç§„É†„ÅåÂ§ß‰∫ã", value: "personal_relax" }
      ]
    },
    {
      id: 4,
      text: "„ÅäÈ¢®ÂëÇÊéÉÈô§„Å´„Å§„ÅÑ„Å¶‰∏ÄÁï™Ëøë„ÅÑ„ÇÇ„ÅÆ„Çí„Äê1„Å§„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      options: [
        { icon: "‚ú®", text: "„Å™„Çã„Åπ„Åè\n„É©„ÇØ„Å´„Åó„Åü„ÅÑ", value: "easy_clean_priority" },
        { icon: "üìÖ", text: "ÈÄ±1„Åè„Çâ„ÅÑ„Åß\n‰∏ÄÊ∞ó„Å´ÊéÉÈô§„Åó„Åü„ÅÑ", value: "weekly_clean" },
        { icon: "ü§ñ", text: "Ëá™Âãï„ÅÆÊ¥óÊµÑÊ©üËÉΩ„Å´\nËààÂë≥„Åå„ÅÇ„Çã", value: "auto_clean_interest" },
        { icon: "üí≠", text: "Áâπ„Å´„Å™„Åó", value: "no_preference" }
      ]
    },
    {
      id: 5,
      text: "ÂÖâÁÜ±Ë≤ª„Å´„Å§„ÅÑ„Å¶„ÅÆËÄÉ„ÅàÊñπ„Åß‰∏ÄÁï™Ëøë„ÅÑ„ÇÇ„ÅÆ„Çí„Äê1„Å§„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      options: [
        { icon: "üí∞", text: "ÊØéÊúà„ÅÆ„É©„É≥„Éã„É≥„Ç∞„Ç≥„Çπ„Éà„ÅØ\n„Åß„Åç„Çã„Å†„ÅëÊäë„Åà„Åü„ÅÑ", value: "cost_priority" },
        { icon: "‚öñÔ∏è", text: "Ê∞ó„Å´„Å™„Çã„Åå\nÂø´ÈÅ©„Åï„ÇíÂÑ™ÂÖà„Åó„Åü„ÅÑ", value: "comfort_priority" },
        { icon: "üåü", text: "„ÅÇ„Åæ„ÇäÊÑèË≠ò„Åó„Å¶„ÅÑ„Å™„ÅÑ", value: "not_concerned" }
      ]
    },
    {
      id: 6,
      text: "„ÅäÈ¢®ÂëÇ„ÅÆ„ÄåÁ©∫Èñì„Äç„Åß‰∏ÄÁï™Ëøë„ÅÑ„Ç§„É°„Éº„Ç∏„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü„Äê1„Å§„Äë",
      options: [
        { icon: "üè®", text: "„Éõ„ÉÜ„É´„É©„Ç§„ÇØ„Åß\nÈ´òÁ¥öÊÑü„ÅÆ„ÅÇ„ÇãÁ©∫Èñì", value: "luxury_hotel" },
        { icon: "‚ú®", text: "Êòé„Çã„ÅèÊ∏ÖÊΩîÊÑü„ÅÆ\n„ÅÇ„ÇãÁ©∫Èñì", value: "bright_clean" },
        { icon: "üå≥", text: "Êú®„ÅÆ„Å¨„Åè„ÇÇ„Çä„Çí\nÊÑü„Åò„ÇãÁ©∫Èñì", value: "natural_wood" },
        { icon: "üéØ", text: "Èè°„ÇÑ„Ç´„Ç¶„É≥„Çø„Éº„ÇíÊ∏õ„Çâ„Åó„Åü\n„Çπ„ÉÉ„Ç≠„É™Á©∫Èñì", value: "minimalist" }
      ]
    },
    {
      id: 7,
      text: "Áõ¥ÊÑü„Åß„ÄåÂ•Ω„Åç„Äç„Å™„ÅäÈ¢®ÂëÇ„ÅÆ„Ç§„É°„Éº„Ç∏„Çí„Äê1„Å§„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      options: [
        { icon: "üíé", text: "Êòé„Çã„Åè‰∏äÂìÅ„Å™\n„Çπ„Éà„Éº„É≥Ë™ø", value: "stone" },
        { icon: "üå≤", text: "Êú®„ÅÆ„Å¨„Åè„ÇÇ„Çä\n„Éä„ÉÅ„É•„É©„É´„Ç¶„ÉÉ„ÉâË™ø", value: "natural_wood_style" },
        { icon: "üñ§", text: "ËêΩ„Å°ÁùÄ„ÅÑ„Åü\n„Éñ„É©„ÉÉ„ÇØ„Ç∑„ÉÉ„ÇØË™ø", value: "black_chic" }
      ]
    },
    {
      id: 8,
      text: "Êñ∞„Åó„ÅÑ„ÅäÈ¢®ÂëÇ„Å´„Åì„Çå„Å†„Åë„ÅØË≠≤„Çå„Å™„ÅÑ„ÄÅ„Å®ÊÄù„ÅÜ„ÇÇ„ÅÆ„Çí„Äê2„Å§„Åæ„Åß„ÄëÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ",
      maxSelections: 2,
      options: [
        { icon: "üî•", text: "ÂØí„Åï„Åã„Çâ\nËß£Êîæ„Åï„Çå„Åü„ÅÑ", value: "warm" },
        { icon: "‚ú®", text: "ÊéÉÈô§„Åã„Çâ\nËß£Êîæ„Åï„Çå„Åü„ÅÑ", value: "easy_maintenance" },
        { icon: "üí∞", text: "Ê∞¥ÈÅì„ÉªÂÖâÁÜ±Ë≤ª„Çí\nÊäë„Åà„Åü„ÅÑ", value: "utility_save" },
        { icon: "üßò", text: "Áôí„Åó„ÅÆÁ©∫Èñì„Å´\nÂ§â„Åà„Åü„ÅÑ", value: "healing" },
        { icon: "üé®", text: "Ë¶ã„ÅüÁõÆ„Çí\nÊñ∞„Åó„Åè„Åó„Åü„ÅÑ", value: "aesthetic" },
        { icon: "üí≠", text: "„Å™„Çì„Å®„Å™„Åè\nÊ∞ó„Å´„Å™„Å£„Å¶„ÅÑ„Çã", value: "curious" }
      ]
    }
  ];

  const productImages = {
    '„Çµ„Ç∂„Éä': { main: 'https://i.imgur.com/xdQVq0N.png', sub: 'https://i.imgur.com/quvtqCQ.png' },
    '„Ç∑„É≥„É©': { main: 'https://i.imgur.com/A2hRr0s.png', sub: 'https://i.imgur.com/JfPpbvJ.png' },
    '„É™„Éá„Ç¢': { main: 'https://i.imgur.com/ENM59T6.png', sub: 'https://i.imgur.com/LKbKQ3M.png' },
    '„Çπ„Éë„Éº„Ç∏„É•': { main: 'https://i.imgur.com/PC1fALn.png', sub: '' },
    '„Ç∞„É©„É≥„Çπ„Éë': { main: 'https://i.imgur.com/Rjhtb77.png', sub: '' },
    '„É©„ÇØ„É¥„Ç£„Ç¢': { main: 'https://i.imgur.com/JammMXT.png', sub: '' },
    '„Çª„É¨„É¥„Ç£„Ç¢': { main: 'https://i.imgur.com/gc6Qat0.png', sub: '' },
    'every': { main: 'https://i.imgur.com/UUR1X1j.png', sub: '' },
    'AXIY': { main: 'https://i.imgur.com/P6lkQtn.png', sub: '' }
  };

  let currentQuestion = 0;
  let answers = {};
  let selectedOption = null;
  let selectedOptions = [];

  function startDiagnosis(){
    document.getElementById('startScreen').style.display = 'none';
    document.getElementById('questionScreen').style.display = 'block';
    currentQuestion = 0;
    answers = {};
    selectedOption = null;
    selectedOptions = [];
    showQuestion();
  }

  function showQuestion(){
    const q = questions[currentQuestion];
    const progress = ((currentQuestion + 1) / questions.length) * 100;
    document.getElementById('progressFill').style.width = progress + '%';
    document.getElementById('questionNumber').textContent = `Ë≥™Âïè ${currentQuestion + 1}/${questions.length}`;
    document.getElementById('questionText').textContent = q.text;

    const optionsContainer = document.getElementById('optionsContainer');
    optionsContainer.innerHTML = '';

    const isMulti = q.maxSelections && q.maxSelections > 1;

    q.options.forEach((opt, idx) => {
      const card = document.createElement('div');
      card.className = 'option-card';
      card.innerHTML = `
        <div class="option-icon">${opt.icon}</div>
        <div class="option-text">${opt.text}</div>
      `;
      card.onclick = isMulti
        ? () => selectMultipleOptions(idx, opt.value, q.maxSelections)
        : () => selectOption(idx, opt.value);
      optionsContainer.appendChild(card);
    });

    if (isMulti){
      selectedOptions = answers[q.id] || [];
      const cards = document.querySelectorAll('.option-card');
      selectedOptions.forEach(v => {
        const i = q.options.findIndex(o => o.value === v);
        if (i !== -1) cards[i].classList.add('selected');
      });
    }else{
      selectedOption = answers[q.id] || null;
      if (selectedOption){
        const i = q.options.findIndex(o => o.value === selectedOption);
        if (i !== -1){
          const cards = document.querySelectorAll('.option-card');
          cards[i].classList.add('selected');
        }
      }
    }

    updateNavigationButtons();
  }

  function selectOption(index, value){
    const cards = document.querySelectorAll('.option-card');
    cards.forEach((c,i)=>c.classList.toggle('selected', i===index));
    selectedOption = value;
    answers[questions[currentQuestion].id] = value;
    updateNavigationButtons();
  }

  function selectMultipleOptions(index, value, maxSelections){
    const cards = document.querySelectorAll('.option-card');
    const card = cards[index];

    if (selectedOptions.includes(value)){
      selectedOptions = selectedOptions.filter(v => v !== value);
      card.classList.remove('selected');
    }else{
      if (selectedOptions.length < maxSelections){
        selectedOptions.push(value);
        card.classList.add('selected');
      }
    }
    answers[questions[currentQuestion].id] = selectedOptions;
    updateNavigationButtons();
  }

  function updateNavigationButtons(){
    const q = questions[currentQuestion];
    const isMulti = q.maxSelections && q.maxSelections > 1;

    document.getElementById('backButton').disabled = currentQuestion === 0;
    document.getElementById('nextButton').disabled = isMulti ? (selectedOptions.length < 1) : (selectedOption === null);
  }

  function goBack(){
    if (currentQuestion <= 0) return;
    currentQuestion--;
    const q = questions[currentQuestion];
    const isMulti = q.maxSelections && q.maxSelections > 1;
    if (isMulti) selectedOptions = answers[q.id] || [];
    else selectedOption = answers[q.id] || null;
    showQuestion();
  }

  function goNext(){
    const q = questions[currentQuestion];
    const isMulti = q.maxSelections && q.maxSelections > 1;
    const isAnswered = isMulti ? (selectedOptions.length > 0) : (selectedOption !== null);

    if (!isAnswered) return;

    if (currentQuestion < questions.length - 1){
      currentQuestion++;
      const nextQ = questions[currentQuestion];
      const nextIsMulti = nextQ.maxSelections && nextQ.maxSelections > 1;
      if (nextIsMulti) selectedOptions = answers[nextQ.id] || [];
      else selectedOption = answers[nextQ.id] || null;
      showQuestion();
    }else{
      document.getElementById('questionScreen').style.display = 'none';
      document.getElementById('resultScreen').style.display = 'block';
      calculateResult();
    }
  }

  function calculateResult(){
    document.getElementById('resultLoading').style.display = 'block';
    document.getElementById('resultContent').style.display = 'none';

    const allAnswers = Object.values(answers).flat();
    const counts = allAnswers.reduce((acc, val) => {
      acc[val] = (acc[val] || 0) + 1;
      return acc;
    }, {});

    let resultProduct = '„Çµ„Ç∂„Éä';
    let resultDesc = '„ÅäÂÆ¢Êßò„ÅÆÂõûÁ≠î„Åã„Çâ„ÄÅ**„Çµ„Ç∂„Éä**„ÅåÊúÄ„ÇÇÈÅ©„Åó„Å¶„ÅÑ„Çã„Å®Ë®∫Êñ≠„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Çµ„Ç∂„Éä„ÅØ„ÄÅÂø´ÈÅ©„Å®„Ç®„Ç≥„Çí‰∏°Á´ã„Åó„ÅüÊ©üËÉΩ„ÅåÂÖÖÂÆü„Åó„Å¶„Åä„Çä„ÄÅÂ§ö„Åè„ÅÆÊñπ„Å´„Åä„Åô„Åô„ÇÅ„Åß„Åç„Çã„É¢„Éá„É´„Åß„Åô„ÄÇ';

    if (counts['relax_deep'] || counts['personal_relax'] || counts['luxury_hotel']){
      resultProduct = '„Ç∑„É≥„É©';
      resultDesc = '„ÅäÂÆ¢Êßò„ÅØ„ÄÅ„ÅäÈ¢®ÂëÇ„Åß„ÅÆ**„É™„É©„ÉÉ„ÇØ„Çπ„Çø„Ç§„É†**„ÇíÁâπ„Å´ÈáçË¶ñ„Åï„Çå„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô„ÄÇ**„Ç∑„É≥„É©**„ÅØ„ÄÅ‰∏äË≥™„Å™„Éá„Ç∂„Ç§„É≥„Å®„É™„É©„ÉÉ„ÇØ„ÇπÊ©üËÉΩ„ÇíÂÖº„Å≠ÂÇô„Åà„ÅüÊúÄÈ´òÁ¥ö„É¢„Éá„É´„Åß„Åô„ÄÇ';
    } else if (counts['easy_clean'] || counts['easy_clean_priority'] || counts['auto_clean_interest']){
      resultProduct = '„É™„Éá„Ç¢';
      resultDesc = '„ÅäÂÆ¢Êßò„ÅØ„ÄÅ**„ÅäÊâãÂÖ•„Çå„ÅÆ„Åó„ÇÑ„Åô„Åï**„ÇíÈáçË¶ñ„Åï„Çå„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô„ÄÇ**„É™„Éá„Ç¢**„ÅØ„ÄÅÊó•„ÄÖ„ÅÆÊéÉÈô§„Çí„É©„ÇØ„Å´„Åô„ÇãÊ©üËÉΩ„ÅåÂÖÖÂÆü„Åó„Åü„É¢„Éá„É´„Åß„Åô„ÄÇ';
    } else if (counts['warm'] || counts['insulation'] || counts['heat_cost']){
      resultProduct = '„Çπ„Éë„Éº„Ç∏„É•';
      resultDesc = '„ÅäÂÆ¢Êßò„ÅØ„ÄÅ**Ê∏©„Åã„Åï**„Å®**Âø´ÈÅ©ÊÄß**„ÇíÈáçË¶ñ„Åï„Çå„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô„ÄÇ**„Çπ„Éë„Éº„Ç∏„É•**„ÅØ„ÄÅÈ´ò„ÅÑÊñ≠ÁÜ±ÊÄßËÉΩ„ÅßÂÜ¨„Åß„ÇÇÂø´ÈÅ©„Å™„Éê„Çπ„Çø„Ç§„É†„ÇíÂÆüÁèæ„Åó„Åæ„Åô„ÄÇ';
    }

    setTimeout(() => {
      document.getElementById('resultLoading').style.display = 'none';
      document.getElementById('resultContent').style.display = 'block';
      document.getElementById('resultProduct').textContent = resultProduct;
      document.getElementById('resultDescription').innerHTML = resultDesc.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

      const images = productImages[resultProduct] || { main:'', sub:'' };
      const mainImg = document.getElementById('resultImageMain');
      const subImg = document.getElementById('resultImageSub');

      mainImg.src = images.main || '';
      mainImg.style.display = images.main ? 'block' : 'none';
      mainImg.alt = `${resultProduct} („É°„Ç§„É≥)`;

      subImg.src = images.sub || '';
      subImg.style.display = images.sub ? 'block' : 'none';
      subImg.alt = `${resultProduct} („Çµ„Éñ)`;
    }, 1500);
  }

  // ‚òÖ„Äå„ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë®∫Êñ≠„Åô„Çã„ÄçÔºù Ë°®Á¥ôÔºàselect.htmlÔºâ„Å∏
  function restartDiagnosis(){
    window.location.href = "select.html";
  }

  // ‚ÄúË®∫Êñ≠„Çπ„Çø„Éº„Éà‚ÄùÊîπË°å„ÇíÂÆâÂÆöÂåñ
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('startButton');
    if(btn) btn.textContent = "Ë®∫Êñ≠\n„Çπ„Çø„Éº„Éà";
  });
    // „Äå„ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë®∫Êñ≠„Åô„Çã„ÄçÔºù Ë°®Á¥ô(select.html)„Å´Êàª„Åô
function restartDiagnosis(){
  window.location.href = "select.html";
}

</script>   
</body>
</html>
